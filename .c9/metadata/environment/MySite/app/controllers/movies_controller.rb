{"changed":true,"filter":false,"title":"movies_controller.rb","tooltip":"/MySite/app/controllers/movies_controller.rb","value":"# This file is app/controllers/movies_controller.rb\nclass MoviesController < ApplicationController\n  def index\n    @movies = Movie.all\n  end\n  \n  def show\n  @movie = Movie.find_by_id(params[:id])\n  end\n  \n  def new\n    # default: render 'new' template\n  \n  end\n  \n  def create\n\t  @movie = Movie.create!(movie_params)\n\t  flash[:notice] = \"#{@movie.title} was successfully created.\"\n\t  redirect_to movie_path(@movie) \n  end\n  \n  def edit\n  @movie = Movie.find params[:id]\n  end\n\n  def update\n    @movie = Movie.find params[:id]\n    @movie.update_attributes!(params[:movie])\n    flash[:notice] = \"#{@movie.title} was successfully updated.\"\n    redirect_to movie_path(@movie)\n  end\n  \n  def destroy\n  @movie = Movie.find(params[:id])\n  @movie.destroy\n  flash[:notice] = \"Movie '#{@movie.title}' deleted.\"\n  redirect_to movies_path\n  end\n  \n  private\n    def movie_params\n      params.require(:movie).permit(:title, :rating, :description, :release_date)\n    end\n    \n  \n  \n \nend","undoManager":{"mark":10,"position":14,"stack":[[{"start":{"row":18,"column":15},"end":{"row":18,"column":26},"action":"remove","lines":["movies_path"],"id":16},{"start":{"row":18,"column":15},"end":{"row":18,"column":32},"action":"insert","lines":["movie_detail_path"]}],[{"start":{"row":11,"column":2},"end":{"row":13,"column":5},"action":"remove","lines":["def new","  # default: render 'new' template","  end"],"id":17},{"start":{"row":11,"column":2},"end":{"row":16,"column":5},"action":"insert","lines":["def new","    # default: render 'new' template","    unless current_user","      redirect_to movie_index_path","    end","  end"]}],[{"start":{"row":14,"column":28},"end":{"row":14,"column":29},"action":"remove","lines":["x"],"id":18},{"start":{"row":14,"column":27},"end":{"row":14,"column":28},"action":"remove","lines":["e"]},{"start":{"row":14,"column":26},"end":{"row":14,"column":27},"action":"remove","lines":["d"]},{"start":{"row":14,"column":25},"end":{"row":14,"column":26},"action":"remove","lines":["n"]},{"start":{"row":14,"column":24},"end":{"row":14,"column":25},"action":"remove","lines":["i"]},{"start":{"row":14,"column":23},"end":{"row":14,"column":24},"action":"remove","lines":["_"]}],[{"start":{"row":14,"column":23},"end":{"row":14,"column":24},"action":"insert","lines":["s"],"id":19}],[{"start":{"row":21,"column":15},"end":{"row":21,"column":32},"action":"remove","lines":["movie_detail_path"],"id":20},{"start":{"row":21,"column":15},"end":{"row":21,"column":32},"action":"insert","lines":["movie_detail_path"]}],[{"start":{"row":21,"column":14},"end":{"row":21,"column":32},"action":"remove","lines":[" movie_detail_path"],"id":21},{"start":{"row":21,"column":14},"end":{"row":21,"column":31},"action":"insert","lines":["movie_path(movie)"]}],[{"start":{"row":21,"column":14},"end":{"row":21,"column":15},"action":"insert","lines":[" "],"id":22}],[{"start":{"row":21,"column":31},"end":{"row":21,"column":32},"action":"remove","lines":[")"],"id":23},{"start":{"row":21,"column":30},"end":{"row":21,"column":31},"action":"remove","lines":["e"]},{"start":{"row":21,"column":29},"end":{"row":21,"column":30},"action":"remove","lines":["i"]},{"start":{"row":21,"column":28},"end":{"row":21,"column":29},"action":"remove","lines":["v"]},{"start":{"row":21,"column":27},"end":{"row":21,"column":28},"action":"remove","lines":["o"]},{"start":{"row":21,"column":26},"end":{"row":21,"column":27},"action":"remove","lines":["m"]},{"start":{"row":21,"column":25},"end":{"row":21,"column":26},"action":"remove","lines":["("]}],[{"start":{"row":13,"column":3},"end":{"row":15,"column":7},"action":"remove","lines":[" unless current_user","      redirect_to movies_path","    end"],"id":24},{"start":{"row":13,"column":2},"end":{"row":13,"column":3},"action":"remove","lines":[" "]}],[{"start":{"row":7,"column":40},"end":{"row":7,"column":72},"action":"remove","lines":[" # what if this movie not in DB?"],"id":25}],[{"start":{"row":8,"column":2},"end":{"row":8,"column":50},"action":"remove","lines":["# BUG: we should check @movie for validity here!"],"id":26},{"start":{"row":8,"column":0},"end":{"row":8,"column":2},"action":"remove","lines":["  "]},{"start":{"row":7,"column":40},"end":{"row":8,"column":0},"action":"remove","lines":["",""]}],[{"start":{"row":23,"column":5},"end":{"row":24,"column":0},"action":"insert","lines":["",""],"id":27},{"start":{"row":24,"column":0},"end":{"row":24,"column":2},"action":"insert","lines":["  "]},{"start":{"row":24,"column":2},"end":{"row":25,"column":0},"action":"insert","lines":["",""]},{"start":{"row":25,"column":0},"end":{"row":25,"column":2},"action":"insert","lines":["  "]}],[{"start":{"row":24,"column":2},"end":{"row":31,"column":5},"action":"insert","lines":["def edit","    if current_user","      @movie = Movie.find params[:id]","    else","      redirect_to movie_index_path","    end","\t  ","  end"],"id":28}],[{"start":{"row":24,"column":0},"end":{"row":31,"column":5},"action":"remove","lines":["  def edit","    if current_user","      @movie = Movie.find params[:id]","    else","      redirect_to movie_index_path","    end","\t  ","  end"],"id":29}],[{"start":{"row":24,"column":0},"end":{"row":25,"column":2},"action":"remove","lines":["","  "],"id":30},{"start":{"row":24,"column":0},"end":{"row":25,"column":1},"action":"remove","lines":[""," "]}]]},"ace":{"folds":[],"scrolltop":377.5,"scrollleft":0,"selection":{"start":{"row":24,"column":0},"end":{"row":24,"column":0},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":24,"state":"start","mode":"ace/mode/ruby"}},"timestamp":1566876316623}