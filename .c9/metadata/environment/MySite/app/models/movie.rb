{"filter":false,"title":"movie.rb","tooltip":"/MySite/app/models/movie.rb","undoManager":{"mark":2,"position":2,"stack":[[{"start":{"row":0,"column":0},"end":{"row":2,"column":3},"action":"remove","lines":["class Movie < ActiveRecord::Base","  ","end"],"id":2},{"start":{"row":0,"column":0},"end":{"row":24,"column":62},"action":"insert","lines":["class Movie < ActiveRecord::Base","  def self.all_ratings ; %w[G PG PG-13 R NC-17] ; end #  shortcut: array of strings","  validates :title, :presence => true","  validates :release_date, :presence => true","  validate :released_1930_or_later # uses custom validator below","  validates :rating, :inclusion => {:in => Movie.all_ratings},","    :unless => :grandfathered?","  def released_1930_or_later","    errors.add(:release_date, 'must be 1930 or later') if","      release_date && release_date < Date.parse('1 Jan 1930')","  end","  @@grandfathered_date = Date.parse('1 Nov 1968')","  def grandfathered?","    release_date && release_date >= @@grandfathered_date","  end","end","# try in console:","m = Movie.new(:title => '', :rating => 'RG', :release_date => '1929-01-01')","# force validation checks to be performed:","m.valid?  # => false","m.errors[:title] # => [\"can't be blank\"]","m.errors[:rating] # => [\"is not included in the list\"]","m.errors[:release_date] # => [\"must be 1930 or later\"]","m.errors.full_messages # => [\"Title can't be blank\", \"Rating is not","  included in the list\", \"Release date must be 1930 or later\"]"]}],[{"start":{"row":24,"column":1},"end":{"row":24,"column":2},"action":"remove","lines":[" "],"id":3},{"start":{"row":24,"column":0},"end":{"row":24,"column":1},"action":"remove","lines":[" "]},{"start":{"row":23,"column":67},"end":{"row":24,"column":0},"action":"remove","lines":["",""]}],[{"start":{"row":23,"column":67},"end":{"row":23,"column":68},"action":"insert","lines":[" "],"id":4}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":13,"column":56},"end":{"row":13,"column":56},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":32,"mode":"ace/mode/ruby"}},"hash":"f8a973e49c99c9c38dd1cb115b9d66035bdf12ab","timestamp":1569742489793}